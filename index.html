<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./styles.css" />
        <script src="./js/p5.js"></script>
        <title>Alien Escape</title>
    </head>
    <body>
        <h1> Alien Escape By @Rackdev </h1>
        <div class="messages" >
            <p>Vidas: <span id="lives"></span></p>
            <p>Tiempo: <span id="time"></span></p>
            <p>Record: <span id="record"></span></p>
            <p>Resultado: <span id="result"></span></p>
            <p><button id="reset_button">Reiniciar Juego</button></p>
        </div>

        <div class="game-container">
            <canvas id="game"></canvas>
            <div class="btns">
                
                <button class="button" id="left">Left</button>
                <button class="button" id="up">Top</button>
                <button class="button" id="right">Right</button>
                <button class="button" id="down">Down</button>
            </div>
            
        </div>
        <!-- <script src="./js/js.js"></script> -->
        <script>
            console.clear();

let angle = 3.14/4;
let length = 2;

let particles = [];

let mouseHasMoved = false;

function setup() {
  createCanvas(windowWidth, windowHeight);
  colorMode(HSB);
  background(0, 0, 0);
  noStroke();
  angle = PI/3;
  for (let i=0; i<500; i++) {
    new Particle(createVector(random(width), random(height)));
  }
}

function draw() {
  if (!mouseHasMoved) {
    for (let i=0; i<5; i++) {
      new Particle(createVector(random(width), random(height)));
    }
  }
  background(0, 0, 0, .1);
  for (let p of particles) {
    p.update();
    p.draw();
  }
}

function mouseMoved() {
  mouseHasMoved = true;
  for (let i=0; i<5; i++) {
    new Particle(createVector(mouseX, mouseY));
  }
}

class Particle {
  constructor(pos) {
    this.pos = pos;
    this.vel = createVector(random(length*.5, length*1.5), 0).rotate(angle * round(random(0, 360)));
    this.hue = random(90, 150);
    this.sat = 100;
    this.val = 100;
    this.lifetime = random(50, 150);
    this.age = 0;
    particles.push(this);
  }
  
  update() {
    if (this.age >= this.lifetime) {this.remove()}
    this.age += 1;
    if (this.age % 10 == 0) {
      this.vel.rotate(random([-angle, angle]));
    }
    this.pos.add(this.vel);
  }
  
  draw() {
    push()
    stroke(this.hue, this.sat, this.val, 1-this.age/this.lifetime);
    translate(this.pos.x, this.pos.y);
    line(0, 0, -this.vel.x, -this.vel.y);
    pop()
  }
  
  remove() {
    particles.splice(particles.indexOf(this), 1);
  }
}
        </script>
        <script src="./js/maps.js"></script>
        <script src="./js/game.js"></script>
    </body>
</html>
